---
name: 'â˜‘ï¸ Checks Pipeline'
description: 'Checks the codebase health'

inputs:
    run-tests-command:
        description: 'Run tests command, default is `npm test`'
        default: 'npm test'
        required: false

    run-tests:
        description: 'Run tests'
        default: 'true'
        required: false

    run-lint-command:
        description: 'Run linter command, default is `npm run lint`'
        default: 'npm run lint'
        required: false

    run-lint:
        description: 'Run lint'
        default: 'true'
        required: false

    run-build-command:
        description: 'Run build command, default is `npm run build`'
        default: 'npm run build'
        required: false

    run-build:
        description: 'Run build'
        default: 'true'
        required: false

runs:
    using: composite
    steps:
        - name: ğŸ–¥ï¸ Setup Node
          uses: actions/setup-node@v3
          with:
              node-version: 20

        - name: ğŸ”— Install Dependencies
          shell: bash
          run: |
              npm install --legacy-peer-deps

        - name: ğŸ§ª Test
          if: ${{ inputs.run-tests == 'true' }}
          shell: bash
          run: |
              ${{ inputs.run-tests-command }}

        - name: ğŸ”¨ Build
          if: ${{ inputs.run-build == 'true' }}
          shell: bash
          run: |
              ${{ inputs.run-build-command }}

        - name: âœ… Lint
          if: ${{ inputs.run-lint == 'true' }}
          shell: bash
          run: |
              ${{ inputs.run-lint-command }}
